jsLoad("Code ", "shopTools", "#include Host\n\nget_help2← { 1↓ \"\ntestShop	contains tools to debug shop for Safeway\n	f, s, w, sr	⍝ nouns, shop file names\n	set testXX	⍝ verb, create an initial version of Result\n	now		⍝ noun, return current version of Result\n	new		⍝ verb, do most rearrangements for new versions\"\n}\n\n# Config base names\nfc← { ∊\"shopSmart\" ⍵ } ⋄ get_f← { fc '' }\nsc← { ∊\"shopSafe\" ⍵ }  ⋄ get_s← { sc '' } ⋄ get_sr← { sc \"Result\" }\nwc← { ∊\"shopWhole\" ⍵ } ⋄ get_w← { wc '' }\n\nset← { \n a← ⍵ ⎕replace '/' TAB\n a file sr\n}\n\ntest0← '!berryBlue/9games/amilkLowFat/awhipCream/&mushroom;6fun/9and;//2/3/'\ntest1← 'bguacCupsMild/amilkLowFat/&bellPepper/1chicBreast/1chicThigh;;/2/3/2/'\n\nget_now← {\n (file sr)⎕replace TAB '/'\n}\n\nnew← {\n lin← SplitConfig ⍵, '1'\n lin← ⍺ {\n  ⍺ : lin\n  lin← lin ⎕replace '!_' '01'  ⍝ !_=Fruit-Nuts		01\n  lin← lin ⎕replace '$_' '03'  ⍝ $_=Salads		03\n  lin← lin ⎕replace '&_' '05'  ⍝ &_=Fresh Produce	05\n  lin← lin ⎕replace '/_' '07'  ⍝ /_=Bananas		07\n  lin← lin ⎕replace '0_' '09'  ⍝ 0_=Dry Produce		09\n } ⍵\n\n lin← lin ⎕replace '_' '5'\n lin file ⍵, '3'\n edit ⍵, '3'\n}\n\nSplitConfig← {\n (key lin)← Shop ⍵\n key← {(1↑ ⍵), '_', 1↓ ⍵}¨ key\n lin← {(1↑ 0⊃⍵), '_', 1⊃ ⍵}¨ lin\n (key lin)← {⍵ ⎕join LF}¨ key lin\n lin← (key ';' lin) ⎕join LF\n}\n\nShop← {\n lin← ⎕file ⍵\n (key lin)← {(⎕trim ⍵) ⎕split LF}¨ lin ⎕split ';'\n lin← {⍵ ⎕split ','}¨ lin\n key lin\n}")